(function(){
'use strict';for(var d="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,l=["Array","prototype","fill"],m=0;m<l.length-1;m++){var n=l[m];n in h||(h[n]={});h=h[n]}
var p=l[l.length-1],q=h[p],r=q?q:function(a,c,b){var g=this.length||0;0>c&&(c=Math.max(0,g+c));if(null==b||b>g)b=g;b=Number(b);0>b&&(b=Math.max(0,g+b));for(c=Number(c||0);c<b;c++)this[c]=a;return this};r!=q&&null!=r&&d(h,p,{configurable:!0,writable:!0,value:r});function t(a,c,b,g,f,y,J,k,e,W,S){this.frame=0;4==arguments.length?(this.x=a,this.y=c,this.duration=S,this.target=b,this.c=g,this.a=f,this.b=y,this.speed=e):1==arguments.length?(this.x=a[0]<<2,this.y=a[1]<<2,this.target=(a[2]&253)>>2,this.c=a[2]&3,this.a=(a[3]&224)>>5,this.b=(a[3]&28)>>2,this.speed=(a[4]&48)>>4,this.start=(a[4]&15)<<12+a[5]<<2+((a[6]&192)>>6),this.duration=((a[6]&63)<<8)+a[7],console.log("init"+a[2]+" "+this.target)):this.duration=this.start=this.speed=this.b=this.a=this.c=this.target=
this.y=this.x=0}function u(a,c,b){this.x=a;this.y=c;this.type=0;this.direction=b;this.size=5;this.speed=1.5}var v=[],w=[];function x(a){return new Uint8Array(atob(a).split("").map(function(a){return a.charCodeAt(0)}))}
function z(){for(var a=0;a<v.length;a++){var c=v[a];c.frame++;if(c.frame>c.start&&c.frame<c.start+c.duration&&0==c.frame%(72/(c.c+1))){var b=[];"at the player";"rotating";"top";"left";"right";"bottom";"4 direction where player is";"8 direction where player is";switch(c.target){case 0:b.push(Math.atan2(A-c.y,B-c.x));break;case 1:b.push(c.frame/72);break;case 2:b.push(3*Math.PI/2);break;case 3:b.push(Math.PI);break;case 4:b.push(0);break;case 5:b.push(Math.PI/2);break;case 6:a=(Math.atan2(A-c.y,B-c.x)-
Math.PI/4+2*Math.PI)%(2*Math.PI);a=Math.floor(a/(Math.PI/2))*Math.PI/2+Math.PI/2;b.push(a);break;case 7:a=(Math.atan2(A-c.y,B-c.x)-3*Math.PI/8+2*Math.PI)%(2*Math.PI),a=Math.floor(a/(Math.PI/4))*Math.PI/4+Math.PI/2,b.push(a)}for(var g=0;2>g;g++){var f=[];Array.prototype.forEach.call(b,function(a){switch(0==g?c.a:c.b){case 0:f.push(a);break;case 1:for(var b=-.1;.15>b;b+=.1)f.push(a+b);break;case 2:for(b=-.3;.35>b;b+=.3)f.push(a+b);break;case 3:for(b=-.2;.25>b;b+=.1)f.push(a+b);break;case 4:for(b=-.6;.65>
b;b+=.3)f.push(a+b);break;case 5:for(b=0;b<Math.PI+1;b+=Math.PI)f.push(a+b);break;case 6:for(b=0;b<2*Math.PI;b+=Math.PI/2)f.push(a+b);break;case 7:for(b=0;b<2*Math.PI;b+=Math.PI/4)f.push(a+b)}});b=f}for(a=0;a<b.length;a++)w.push(new u(c.x,c.y,b[a]))}}for(a=0;a<w.length;a++)b=w[a],-50>b.x||1050<b.x||-50>b.y||1050<b.y?(w.splice(a,1),a--):0==b.type&&(b.x+=Math.cos(b.direction)*b.speed,b.y+=Math.sin(b.direction)*b.speed)};var C=[];window.onkeyup=function(a){C[a.keyCode]=!1};window.onkeydown=function(a){C[a.keyCode]=!0};function D(a,c){E.shadowColor=a;E.shadowBlur=c;E.shadowOffsetX=0;E.shadowOffsetY=0}var F="M 0 6 L 2 0 L 4 6 L 3 3 L 1 3;M 0 6 L 0 0 A 1 1 0 1 1 0 3 A 1.5 1 0 0 1 0 6 L 0 3;M 3 0 Q 0 0 0 4 Q 0 6 3 6 ;M 0 6 L 0 0 A 1 1 0 1 1 0 6 ;M 3 6 L 0 6 L 0 3 L 2 3 L 0 3 L 0 0 L 3 0 ;M 1 6 L 1 3 L 3 3 L 1 3 L 1 0 L 4 0;M 2 4 L 4 4 A 2 3 0 1 1 4 2 ;M 0 0 L 0 6 L 0 3 L 3 3 L 3 0 L 3 6 ;M 1 6 L 3 6 L 2 6 L 2 0 L 1 0 L 3 0 ;M 0 5 C 0 7 2 7 2 5 L 2 1 L 1 1 L 3 1 ;M 0 6 L 0 0 L 0 3 L 2 1 L 0 3 L 3 6;M 0 0 L 0 6 L 3 6 ;M 0 6 L 0 0 L 2 2 L 4 0 L 4 6 ;M 0 6 L 0 0 L 4 6 L 4 0 ;M 2 6 A 0.5 1 0 1 1 2 0 A 0.5 1 0 1 1 2 6 ;M 0 6 L 0 0 A 1.5 1 0 1 1 0 3 ;M 3 4 L 4 6 A 1 1 0 1 1 2 1 A 1 1 0 1 1 4 6 ;M 0 6 L 0 0 A 1 1 0 1 1 0 3 L 2 6 ;M 0 6 C 4 7 4 3 2 3 C 0 3 0 -1 3 0 ;M 2 6 L 2 0 L 0 0 L 4 0 ;M 0 0 Q 0 6 1.5 6 Q 3 6 3 0;M 0 0 L 2 6 L 4 0;M 0 0 L 1 6 L 2 0 L 3 6 L 4 0 ;M 0 0 L 4 6 L 2 3 L 0 6 L 4 0 ;M 0 0 L 2 3 L 0 6 L 4 0;M 0 0 L 4 0 L 0 6 L 4 6 ;M 1 0 C 3 0 5 2 3 3 C 1 3.5 2.5 4 2.5 5 ".split(";");
function G(a,c,b,g,f){if(!(0>g||g>8*b.length+f)){if(null==f||void 0==f)f=8*b.length+180;b=b.toLowerCase();E.save();E.lineWidth=.8;E.lineCap="round";E.lineJoin="round";E.translate(a,c);E.scale(3,3);D("white",5);for(a=0;a<b.length;a++)E.globalAlpha=g>8*a?Math.min((g-8*a)/30,1):0,g>f+8*a&&(E.globalAlpha=Math.max(0,Math.min(1-(g-(f+8*a))/30,1))),c=b.charCodeAt(a),63==c?c=26:32==c?c=-1:10==c?(c=-1,E.translate(-5*(a+1),12)):c-=97,-1!=c&&E.stroke(F[c]),E.translate(5,0);E.restore()}};var E,H,I=1E3/60,K=0,L,M=4;
function N(){var a=Date.now();K+=a-L;for(L=a;K>=I;){switch(M){case 0:case 1:O++,1200<O&&(M=1);case 2:case 3:z();a=2;C[17]&&(a=1);C[38]&&(A-=a);C[40]&&(A+=a);C[37]&&(B-=a);C[39]&&(B+=a);P++;0==M&&(Q+=Math.sin(P/60)/15);1<=M&&0<Q&&(Q-=.2);R=!1;a:{a=B;for(var c=A,b=0;b<w.length;b++)if(-999!=w[b].x&&(w[b].x-a)*(w[b].x-a)+(w[b].y-c)*(w[b].y-c)<25+w[b].size*w[b].size){a=!0;break a}a=void 0}a&&(R=!0);break;case 4:if(T++,C[38]?(U&&V--,U=!1):C[40]?(U&&V++,U=!1):U=!0,V=(V+4)%4,C[32])a:{a=V;switch(a){case 2:c=
prompt("please enter the level code","Should look like mH4HnAAAK2eXaxTQAAArZw");if(null==c||""==c){C[32]=!1;break a}v=[];w=[];c=x(c);for(b=0;b<c.length/8;b++)v.push(new t(c.subarray(8*b,8*b+8)));L=Date.now();break;case 3:document.getElementById("editor").style.display="flex";document.getElementById("canvas").classList.add("canvasEdit");c="at the player;rotating;top;left;right;bottom;4 direction where player is;8 direction where player is".split(";");b=["very slow","slow","medium","fast"];for(var g=
"simple bullet;triple bullet close;triple bullet wide;5 bullet close;5 bullet wide;2 bullet in opposite direction;4 bullet in opposite direction;8 bullet in opposite direction".split(";"),f=["quick and small","quick and big","slow and small","slow and big"],y=["fixed","go to random point","go to player","erratic move"],J=["slow","normal","fast","very fast"],k="",e=0;e<c.length;e++)k+="<option value="+e+">"+c[e]+"</option>";document.getElementById("target").innerHTML=k;k="";for(e=0;e<g.length;e++)k+=
"<option value="+e+">"+g[e]+"</option>";document.getElementById("firstMult").innerHTML=k;document.getElementById("secondMult").innerHTML=k;k="";for(e=0;e<b.length;e++)k+="<option value="+e+">"+b[e]+"</option>";document.getElementById("fireRate").innerHTML=k;k="";for(e=0;e<f.length;e++)k+="<option value="+e+">"+f[e]+"</option>";document.getElementById("bulletType").innerHTML=k;k="";for(e=0;e<y.length;e++)k+="<option value="+e+">"+y[e]+"</option>";document.getElementById("movement").innerHTML=k;k="";
for(e=0;e<J.length;e++)k+="<option value="+e+">"+J[e]+"</option>";document.getElementById("speed").innerHTML=k}M=a}}K-=I}D("transparent",0);E.fillStyle="rgba(0,0,0,0.25)";E.rect(0,0,1E3,1E3);E.fill();E.fillStyle="rgba(0,0,0,1)";switch(M){case 0:case 1:G(50,400,"WHERE AM I?",O),G(400,400," Everyone ask the same\nquestion when they arrive",O-300),G(50,400,"What are you\ntalking about??",O-600);case 2:case 3:D("blue",10);E.strokeStyle="red";E.beginPath();for(a=0;a<w.length;a++)-999!=w[a].x&&(E.moveTo(w[a].x,
w[a].y),E.arc(w[a].x,w[a].y,w[a].size,0,2*Math.PI));E.stroke();a=Q;D(R?"blue":"white",10);E.lineWidth=4;E.strokeStyle="white";E.beginPath();E.arc(B,A,5,0,2*Math.PI);E.stroke();for(c=1;5>c;c++)E.globalAlpha=1/(c+1),E.beginPath(),E.arc(B,A,5+c*a/5,0,2*Math.PI),E.stroke();E.globalAlpha=1;break;case 4:a=["Story","Infinite","Custom","Editor"];E.save();E.scale(5,5);E.strokeStyle="black";G(40,20,"Lost Soul",T,T+1);E.restore();E.save();E.scale(2,2);for(c=0;4>c;c++)E.strokeStyle=c==V?"rgba(255,255,255,"+(Math.sin(T/
40)/8+.6)+")":"black",G(100,200+50*c,a[c],T,T+1);E.restore()}requestAnimationFrame(N)}window.onload=function(){for(var a=0;a<F.length;a++)F[a]=new Path2D(F[a]);H=document.getElementById("canvas");H.width=1E3;H.height=1E3;E=H.getContext("2d");L=Date.now();N()};var T=0,V=0,U=!0;var B=120,A=500,Q=10,P=0,R=!1;var O=900;
}).call(this)
